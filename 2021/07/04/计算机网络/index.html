<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="计算机网络一、引子1.1 网络流程问题在浏览器里输入https:&#x2F;&#x2F;www.baidu.com按下回车，看到内容后，背后发生了什么？ 数据封装交换机和路由器的工作原理arp协议http协议web服务器dns 1.2 运维流程 1.3 公司实际网络流程图 二、概况2.1 现状 国内阿里云做的最好 网络工程师逐渐没落，原因是云时代的到来，无人再买服务器，转而购买大厂的云服务器 2021年中国网民约10">
<meta property="og:type" content="article">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/2021/07/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="计算机网络一、引子1.1 网络流程问题在浏览器里输入https:&#x2F;&#x2F;www.baidu.com按下回车，看到内容后，背后发生了什么？ 数据封装交换机和路由器的工作原理arp协议http协议web服务器dns 1.2 运维流程 1.3 公司实际网络流程图 二、概况2.1 现状 国内阿里云做的最好 网络工程师逐渐没落，原因是云时代的到来，无人再买服务器，转而购买大厂的云服务器 2021年中国网民约10">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/06/8be1c8b33dd90448.jpg">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/06/9f16104ce4365f90.png">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgss0.baidu.com%2F7Po3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F0df431adcbef7609c40a753122dda3cc7cd99e1f.jpg&refer=http%3A%2F%2Fgss0.baidu.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1627559509&t=40272902cae38b0d084fac7fe2220caa">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgss0.baidu.com%2F7Po3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F0df431adcbef7609c40a753122dda3cc7cd99e1f.jpg&refer=http%3A%2F%2Fgss0.baidu.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1627559509&t=40272902cae38b0d084fac7fe2220caa">
<meta property="og:image" content="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fseo-1255598498.file.myqcloud.com%2Ffull%2Fa1b608d8a924f451f5538a13996e023be1d904f4.jpg&refer=http%3A%2F%2Fseo-1255598498.file.myqcloud.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1627565113&t=3377d5f4d65ff667ea959d5637e521cb">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/06/ca3617c38fe0f3bc.png">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/315302/201702/315302-20170205101530604-814123578.png">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/07/75096bd0a06b5653.png">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/07/086d8cdff0c4d931.png">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/07/b63911ae5f2b082b.png">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/07/1cca0440dc93d6a2.png">
<meta property="og:image" content="https://ftp.bmp.ovh/imgs/2021/07/7edf331b63f9cfac.png">
<meta property="article:published_time" content="2021-07-04T05:46:29.874Z">
<meta property="article:modified_time" content="2021-07-03T14:12:19.787Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://ftp.bmp.ovh/imgs/2021/06/8be1c8b33dd90448.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-计算机网络" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/07/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="article-date">
  <time class="dt-published" datetime="2021-07-04T05:46:29.874Z" itemprop="datePublished">2021-07-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="计算机网络"><a href="#计算机网络" class="headerlink" title="计算机网络"></a>计算机网络</h1><h2 id="一、引子"><a href="#一、引子" class="headerlink" title="一、引子"></a>一、引子</h2><h3 id="1-1-网络流程问题"><a href="#1-1-网络流程问题" class="headerlink" title="1.1 网络流程问题"></a>1.1 网络流程问题</h3><p><strong>在浏览器里输入<a href="https://www.baidu.com按下回车，看到内容后，背后发生了什么？">https://www.baidu.com按下回车，看到内容后，背后发生了什么？</a></strong></p>
<p>数据封装<br>交换机和路由器的工作原理<br>arp协议<br>http协议<br>web服务器<br>dns</p>
<h3 id="1-2-运维流程"><a href="#1-2-运维流程" class="headerlink" title="1.2 运维流程"></a>1.2 运维流程</h3><p><img src="https://ftp.bmp.ovh/imgs/2021/06/8be1c8b33dd90448.jpg"></p>
<h3 id="1-3-公司实际网络流程图"><a href="#1-3-公司实际网络流程图" class="headerlink" title="1.3 公司实际网络流程图"></a>1.3 公司实际网络流程图</h3><p><img src="https://ftp.bmp.ovh/imgs/2021/06/9f16104ce4365f90.png"></p>
<h2 id="二、概况"><a href="#二、概况" class="headerlink" title="二、概况"></a>二、概况</h2><h3 id="2-1-现状"><a href="#2-1-现状" class="headerlink" title="2.1 现状"></a>2.1 现状</h3><ol>
<li>国内阿里云做的最好</li>
<li>网络工程师逐渐没落，原因是云时代的到来，无人再买服务器，转而购买大厂的云服务器</li>
<li>2021年中国网民约10亿</li>
</ol>
<h3 id="2-2-目的"><a href="#2-2-目的" class="headerlink" title="2.2 目的"></a>2.2 目的</h3><p>对于我：</p>
<ol>
<li>面试必问</li>
<li>考研必考</li>
</ol>
<p>对于实际应用：</p>
<ol>
<li>连接n台电脑，构成网络，提高管理效率（n=10,100,1000,…)</li>
<li>工作中排查故障</li>
</ol>
<h3 id="2-3-大致内容"><a href="#2-3-大致内容" class="headerlink" title="2.3 大致内容"></a>2.3 大致内容</h3><p>TCP/IP（几乎所有内容都围绕此展开）</p>
<p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgss0.baidu.com%2F7Po3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F0df431adcbef7609c40a753122dda3cc7cd99e1f.jpg&refer=http%3A%2F%2Fgss0.baidu.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1627559509&t=40272902cae38b0d084fac7fe2220caa" alt="点击查看源网页"></p>
<p>(<a target="_blank" rel="noopener" href="https://www.baidu.com问题就会从tcp/IP%E4%BA%94%E5%B1%82%E6%A8%A1%E5%9E%8B%E6%9D%A5%E8%A7%A3%E7%AD%94">https://www.baidu.com问题就会从TCP/IP五层模型来解答</a>)</p>
<h2 id="三、基本术语"><a href="#三、基本术语" class="headerlink" title="三、基本术语"></a>三、基本术语</h2><h3 id="3-1-网站开发结构"><a href="#3-1-网站开发结构" class="headerlink" title="3.1 网站开发结构"></a>3.1 网站开发结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">O(网站)--&gt; A(前端)</span><br><span class="line">O--&gt; B(后端)</span><br><span class="line">O--&gt; C(数据库)</span><br></pre></td></tr></table></figure>

<h3 id="3-2-协议"><a href="#3-2-协议" class="headerlink" title="3.2 协议"></a>3.2 协议</h3><p>tcp/ip协议族： tcp ，ip ，icmp，arp，dhcp，http，udp等</p>
<p>ping</p>
<h3 id="3-3-标准"><a href="#3-3-标准" class="headerlink" title="3.3 标准"></a>3.3 标准</h3><p>5G标准：华为，高通，三星，爱立信，诺基亚等–》协议</p>
<h3 id="3-4-WAN"><a href="#3-4-WAN" class="headerlink" title="3.4 WAN"></a>3.4 WAN</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">graph LR</span><br><span class="line">O(网络类型)--&gt; A(广域网WAN)--&gt;wide_area_network</span><br><span class="line">O--&gt; B(局域网LAN)--&gt;local_area_network</span><br><span class="line">O--&gt; C(无线局域网WLAN)--&gt;wireless_local_area_network</span><br><span class="line">O--&gt; D(虚拟局域网VLAN)--&gt;virtual_local_area_network</span><br></pre></td></tr></table></figure>

<h3 id="3-5-交换机和路由器"><a href="#3-5-交换机和路由器" class="headerlink" title="3.5 交换机和路由器"></a>3.5 交换机和路由器</h3><h5 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h5><p>(router)（少）</p>
<p>把数据从一个网络送到另外一个网络，可以跨网段通信<br>192.168.0.1<del>254<br>192.168.100.1</del>254</p>
<h5 id="交换机"><a href="#交换机" class="headerlink" title="交换机"></a>交换机</h5><p>(switch)（多）</p>
<p>组建局域网，把电脑连接起来可以互相通信</p>
<p>无线路由器 –&gt;无线交换机</p>
<p>接口多，8,16,24,48</p>
<h5 id="厂商"><a href="#厂商" class="headerlink" title="厂商"></a>厂商</h5><p>H3C：属于华为，在杭州，高端</p>
<p>华为：高端</p>
<p>Cisco：美国，高端</p>
<p>TP-Link：性价比极高，满足一般需求</p>
<p>锐捷：校园网</p>
<h5 id="网速"><a href="#网速" class="headerlink" title="网速"></a>网速</h5><p>百兆：</p>
<p>100 Mbps = 100/8 MBps</p>
<p>10MBps   mb per second</p>
<p>byte 字节  –&gt;B<br>bit  位   –&gt;b<br>1 byte = 8 bit</p>
<p>三创的网络是电信网，300Mbps 300/8=37.5MB，但由于交换机的每个端口最大100Mbps，所以网速被限制了</p>
<h3 id="3-6-防火墙"><a href="#3-6-防火墙" class="headerlink" title="3.6 防火墙"></a>3.6 防火墙</h3><p>其实就是高级的路由器，对进出数据进行过滤</p>
<h3 id="3-7-VPN"><a href="#3-7-VPN" class="headerlink" title="3.7 VPN"></a>3.7 VPN</h3><p>Virtual Private Network  虚拟专用网络</p>
<p>在公用网络上建立专用网络，进行加密通讯。</p>
<h3 id="3-8-拓扑结构"><a href="#3-8-拓扑结构" class="headerlink" title="3.8 拓扑结构"></a>3.8 拓扑结构</h3><p>网络分为三层：</p>
<p>接入层</p>
<p>汇聚层</p>
<p>核心层</p>
<p>星型拓扑结构</p>
<p>优点：易于实现，扩展性好，利于故障排查</p>
<p>缺点：计算机过多时中心节点压力大，组网成本高</p>
<p>网型拓扑结构</p>
<p>各个结点至少与其他两个结点相连</p>
<p>可靠性高，成本也高</p>
<h2 id="四、TCP-IP模型"><a href="#四、TCP-IP模型" class="headerlink" title="四、TCP/IP模型"></a>四、TCP/IP模型</h2><h3 id="4-1-模型总览"><a href="#4-1-模型总览" class="headerlink" title="4.1 模型总览"></a>4.1 模型总览</h3><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fgss0.baidu.com%2F7Po3dSag_xI4khGko9WTAnF6hhy%2Fzhidao%2Fpic%2Fitem%2F0df431adcbef7609c40a753122dda3cc7cd99e1f.jpg&refer=http%3A%2F%2Fgss0.baidu.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1627559509&t=40272902cae38b0d084fac7fe2220caa" alt="点击查看源网页"></p>
<h3 id="4-2-OSI模型和TCP-IP模型"><a href="#4-2-OSI模型和TCP-IP模型" class="headerlink" title="4.2 OSI模型和TCP/IP模型"></a>4.2 OSI模型和TCP/IP模型</h3><h4 id="OSI七层模型"><a href="#OSI七层模型" class="headerlink" title="OSI七层模型"></a>OSI七层模型</h4><p><strong>==应表会传往（网）树（数）屋（物）==</strong></p>
<p>概念模型，没有真正实现</p>
<h4 id="TCP-IP五层模型"><a href="#TCP-IP五层模型" class="headerlink" title="TCP/IP五层模型"></a>TCP/IP五层模型</h4><p><img src="https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fseo-1255598498.file.myqcloud.com%2Ffull%2Fa1b608d8a924f451f5538a13996e023be1d904f4.jpg&refer=http%3A%2F%2Fseo-1255598498.file.myqcloud.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1627565113&t=3377d5f4d65ff667ea959d5637e521cb" alt="点击查看源网页"></p>
<h3 id="4-4-封装与拆包"><a href="#4-4-封装与拆包" class="headerlink" title="4.4 封装与拆包"></a>4.4 封装与拆包</h3><p><strong>封装</strong></p>
<p>从应用层到物理层</p>
<p><strong>封装过程</strong></p>
<p><img src="https://ftp.bmp.ovh/imgs/2021/06/ca3617c38fe0f3bc.png"></p>
<p><strong>拆包</strong></p>
<p>从物理层到应用层</p>
<p><strong>拆包过程</strong></p>
<p><img src="https://images2015.cnblogs.com/blog/315302/201702/315302-20170205101530604-814123578.png" alt="img"></p>
<h2 id="五、物理层（网线）"><a href="#五、物理层（网线）" class="headerlink" title="五、物理层（网线）"></a>五、物理层（网线）</h2><h3 id="5-1-信号"><a href="#5-1-信号" class="headerlink" title="5.1 信号"></a>5.1 信号</h3><p>在Linux中就是进程和进程之间的通信</p>
<p>分为模拟信号和数字信号</p>
<p>数字信号更好，抗干扰能力强，传输距离远并能保证质量</p>
<h3 id="5-2-网线"><a href="#5-2-网线" class="headerlink" title="5.2 网线"></a>5.2 网线</h3><p>RJ-45接口</p>
<p>网线的线序</p>
<p>==T568B：白橙、橙、白绿、蓝、白蓝、绿、白棕、棕==</p>
<h3 id="5-3-办公室网络布线"><a href="#5-3-办公室网络布线" class="headerlink" title="5.3 办公室网络布线"></a>5.3 办公室网络布线</h3><p>解决问题：一个普通办公室组建一个办公网络要多少钱？</p>
<p> 清单：<br>    26<em>2=52<br>    交换机：tp_link 1000M  5</em>400=2000<br>    路由器： 华三 800  5个无线TP_LINK 200    1800<br>    线：5<em>26</em>2=260   305  609<br>    打孔：4*80=320<br>    工具+水晶头=100<br>总价： 2000+1800+609+320+100 = 4829</p>
<p>工价：<br>    2个人： 2天<br>    300<em>2</em>2=1200<br>6000 </p>
<h2 id="六、数据链路层（交换机）"><a href="#六、数据链路层（交换机）" class="headerlink" title="六、数据链路层（交换机）"></a>六、数据链路层（交换机）</h2><h3 id="6-1-功能"><a href="#6-1-功能" class="headerlink" title="6.1 功能"></a>6.1 功能</h3><ol>
<li>数据链路的建立、维护与拆除</li>
<li><strong>帧包装、帧传输、帧同步</strong></li>
<li><strong>帧的差错恢复</strong></li>
<li>流量控制</li>
</ol>
<h3 id="6-2-以太网"><a href="#6-2-以太网" class="headerlink" title="6.2 以太网"></a>6.2 以太网</h3><h4 id="6-2-1-什么是以太网"><a href="#6-2-1-什么是以太网" class="headerlink" title="6.2.1 什么是以太网"></a>6.2.1 什么是以太网</h4><p>以太网的MAC地址：网卡里面有，一个网卡有一个mac地址</p>
<p>mac地址也叫硬件地址，也叫物理地址</p>
<p>用16进制表示</p>
<h4 id="6-2-2-以太网帧格式"><a href="#6-2-2-以太网帧格式" class="headerlink" title="6.2.2 以太网帧格式"></a>6.2.2 以太网帧格式</h4><p>数据中的MTU： 最大传输单元（maximum transmission unit） 1500<br>帧： 18个字节  源mac地址+目的mac地址+类型+校验值 + 数据 46<del>1500  64</del>1518</p>
<p><img src="https://ftp.bmp.ovh/imgs/2021/07/75096bd0a06b5653.png"></p>
<h3 id="6-3-交换机的工作原理"><a href="#6-3-交换机的工作原理" class="headerlink" title="6.3 交换机的工作原理"></a>6.3 交换机的工作原理</h3><h4 id="6-3-1-功能"><a href="#6-3-1-功能" class="headerlink" title="6.3.1 功能"></a>6.3.1 功能</h4><p>交换机是一台电脑，用来组建局域网，实现了局域网的通信，只有两种功能：</p>
<p><strong>1、学习</strong></p>
<p>学习各台电脑的mac地址，并将其存入mac地址表，mac地址表存放在交换机的内存中，交换机可以学习mac地址，并按mac地址来决定转发形式。（关机后需重来）</p>
<p>内存分为</p>
<p>rom： read only memory 只读存储器</p>
<p>ram：random access memory 随机存取存储器  –》内存  –》停电会丢失</p>
<p><strong>2、转发</strong></p>
<ol>
<li><p>当目的mac在mac地址表里没有的时候，给其他的接口都转发一份数据帧 –》广播</p>
</li>
<li><p>收到目的mac是FF:FF:FF:FF:FF:FF 这种帧的时候–》广播（FF:FF:FF:FF:FF:FF–&gt;数据帧里的广播地址 –&gt;广播帧）</p>
<p>2层广播地址：FF:FF:FF:FF:FF:FF</p>
<p>3层广播地址： 192.168.0.0/24  –&gt;192.168.0.255 </p>
</li>
<li><p>当目的mac在mac地址表里有的时候，只是转发到对应的接口–》单播</p>
</li>
</ol>
<h4 id="6-3-2-ARP协议"><a href="#6-3-2-ARP协议" class="headerlink" title="6.3.2 ARP协议"></a>6.3.2 ARP协议</h4><p>ARP协议在数据链路层的应用</p>
<p>​        在只知道源目标A机ip地址、mac地址和局域网内目标机B机ip地址（这些ping命令都可以知道）的情况下，要想知道B机的mac地址，就要使用arp协议发送报文来获取B机ip地址。</p>
<p>ARP协议获取mac地址过程：</p>
<p>​        首先，<strong>每个交换机里面有一个mac地址表，每台计算机里面都有一个ARP缓存表</strong></p>
<p>​        在ping包发出之前，如果源机的arp缓存表里没有ip对应的mac地址,我们的电脑会发一个arp广播包，这个广播包的目标mac地址为FF:FF:FF:FF:FF:FF，交换机学习这个包的时候，判定为广播，便会广播出去搜索到对应目标ip地址的目标机，并通过单播的形式返回给源机目标机的mac地址，同时将mac地址存入交换机的mac地址表里面，从而完成获取。</p>
<p>arp 协议有2种类型的数据包</p>
<p>1.请求包 arp request </p>
<p>​    请求得到某个ip对应的mac地址</p>
<p>2.响应包  response</p>
<p>​    把自己的ip对应的mac地址告诉对方</p>
<h4 id="6-3-3-Linux实操"><a href="#6-3-3-Linux实操" class="headerlink" title="6.3.3 !!!Linux实操!!!"></a>6.3.3 !!!Linux实操!!!</h4><p>1、怎么查看本机的MAC地址？</p>
<p>ip add 或者 ifconfig 命令 （Linux）</p>
<p>ipconfig -all（Windows）</p>
<p>ethernet  以太网–》局域网–》mac地址</p>
<p>2、怎么获得整个局域网的全部IP地址？</p>
<p>需要写一个脚本</p>
<p>先ping</p>
<p>再arp -a</p>
<p><strong>3、写一个脚本</strong></p>
<p>==<strong>实现一个命令知道整个局域网里面有哪些ip地址在使用，以及这些ip地址对应的mac地址</strong>==</p>
<p>虚拟机的虚拟网络适配器：</p>
<p><img src="https://ftp.bmp.ovh/imgs/2021/07/086d8cdff0c4d931.png"></p>
<p>主要命令就是ping：用来测试网络是否畅通（通过ICMP协议）</p>
<p>源码：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">!/bin/bash</span></span><br><span class="line"><span class="meta">  </span></span><br><span class="line"><span class="meta">#</span><span class="bash">清空先前的日志文件</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">used_ip.txt</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">unused_ip.txt</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">遍历整个网段，一个一个地ping得到ip地址</span></span><br><span class="line">for i in &#123;1..254&#125;</span><br><span class="line">do</span><br><span class="line">        #使用ping命令来测试这个ip地址是否使用</span><br><span class="line">        (ping 192.168.0.$i -c 1 -w 1 &amp;&gt;/dev/null</span><br><span class="line">        #如果能够ping通，说明$?返回值为0，写到used_ip.txt如果不通，就写到unused_ip.txt文件里面</span><br><span class="line">        if (($? == 0))</span><br><span class="line">        then</span><br><span class="line">                # echo &quot;192.168.0.$i is used&quot;</span><br><span class="line">                echo &quot;192.168.0.$i&quot; &gt;&gt;used_ip.txt</span><br><span class="line">        else</span><br><span class="line">                # echo &quot;192.168.0.$i is unused&quot;</span><br><span class="line">                echo &quot;192.168.0.$i&quot; &gt;&gt;unused_ip.txt</span><br><span class="line">        fi) &amp;</span><br><span class="line">done</span><br><span class="line">wait</span><br><span class="line"></span><br><span class="line">echo &quot;####################used ip detail###################&quot;</span><br><span class="line"><span class="meta">#</span><span class="bash">先输出所有有效ip地址</span></span><br><span class="line">cat used_ip.txt</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">统计并输出有效ip地址的个数</span></span><br><span class="line">num=$(cat used_ip.txt|wc -l)</span><br><span class="line">echo &quot;一共有以上 $num 个ip地址在使用&quot;</span><br><span class="line"></span><br><span class="line">echo &quot;#################### arp 缓存表 #####################&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 得到arp缓存表里的有效ip对应的mac地址</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> arp -a</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运用管道优化输出</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> awk是截取命令，输出固定字节</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> grep是文本过滤命令，-v取反，消去incomplete字节</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> tr是文本转换命令，-d删除，消去ip地址两边的括号</span></span><br><span class="line">arp -a|awk &#x27;&#123;print $2,$4&#125;&#x27;|grep -v &quot;incomplete&quot;|tr -d &#x27;()&#x27;</span><br><span class="line"></span><br><span class="line">echo &quot;####################################################&quot;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 可优化点</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> </span>  </span><br></pre></td></tr></table></figure>



<h2 id="七、网络层"><a href="#七、网络层" class="headerlink" title="七、网络层"></a>七、网络层</h2><p>IP地址是计算机在网络中的唯一标识，是计算机的身份证，用于计算机之间通信</p>
<p>IP地址有两种：</p>
<table>
<thead>
<tr>
<th align="center">种类</th>
<th align="center">位数</th>
<th align="center">个数</th>
<th align="center">现况</th>
</tr>
</thead>
<tbody><tr>
<td align="center">IPV4</td>
<td align="center">32位</td>
<td align="center">$2^{32}$(43亿)</td>
<td align="center">主流常用</td>
</tr>
<tr>
<td align="center">IPV6</td>
<td align="center">128位</td>
<td align="center">$2^{128}$</td>
<td align="center">在使用</td>
</tr>
</tbody></table>
<h3 id="7-1-子网划分（A、B、C类IP地址）"><a href="#7-1-子网划分（A、B、C类IP地址）" class="headerlink" title="7.1 子网划分（A、B、C类IP地址）"></a>7.1 子网划分（A、B、C类IP地址）</h3><p>​        首先，A类地址127.0.0.1作为唯一的环回地址使用，用来在每台计算机测试tcp/ip协议，只能在本地访问，别人不能访问</p>
<p><img src="https://ftp.bmp.ovh/imgs/2021/07/b63911ae5f2b082b.png"></p>
<p>可容纳主机数量：A&gt;B&gt;C</p>
<p><img src="https://ftp.bmp.ovh/imgs/2021/07/1cca0440dc93d6a2.png"></p>
<p>网络又分为公网和私网</p>
<p>公网上同时有A、B、C三类IP地址</p>
<p>而私网的私有IP段有以下三种：</p>
<p><strong>A    10.x.x.x</strong></p>
<p><strong>B    172.16~31.x.x</strong></p>
<p><strong>C    192.168.0~255.x.x</strong></p>
<h3 id="7-2-子网掩码"><a href="#7-2-子网掩码" class="headerlink" title="7.2 子网掩码"></a>7.2 子网掩码</h3><p>子网掩码（subnet mask）用来确定IP的<strong>网络地址</strong>（网段号）</p>
<p>子网掩码获取网络地址过程-&gt;</p>
<p><img src="https://ftp.bmp.ovh/imgs/2021/07/7edf331b63f9cfac.png"></p>
<h3 id="7-3-配置IP地址"><a href="#7-3-配置IP地址" class="headerlink" title="7.3 配置IP地址"></a>7.3 配置IP地址</h3><h4 id="1、Windows配置IP地址"><a href="#1、Windows配置IP地址" class="headerlink" title="1、Windows配置IP地址"></a>1、Windows配置IP地址</h4><ol>
<li>静态配置：手工去配置–》需要人去配置 –》问管理员</li>
<li>自动获得： DHCP服务器给局域网里的机器分配ip地址</li>
</ol>
<p>附：DHCP服务器</p>
<p>DHCP服务器基于动态主机配置协议（Dynamic host configuration protocol），一般就是无线路由器或者路</p>
<p>由器</p>
<p>可以配置：</p>
<ul>
<li>ip地址</li>
<li>子网掩码</li>
<li>默认网关</li>
<li>dns服务器（进行域名和与之相对应的IP地址转换的服务器）</li>
</ul>
<h4 id="2、Linux配置IP地址"><a href="#2、Linux配置IP地址" class="headerlink" title="2、Linux配置IP地址"></a>2、Linux配置IP地址</h4><h5 id="第一步，进入网卡配置文件目录"><a href="#第一步，进入网卡配置文件目录" class="headerlink" title="第一步，进入网卡配置文件目录"></a>第一步，进入网卡配置文件目录</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/sysconfig/network-scripts/</span><br><span class="line">vim ifcfg-ens33</span><br></pre></td></tr></table></figure>



<h5 id="第二步，修改配置文件”ifcfg-ens33”"><a href="#第二步，修改配置文件”ifcfg-ens33”" class="headerlink" title="第二步，修改配置文件”ifcfg-ens33”"></a>第二步，修改配置文件”ifcfg-ens33”</h5><p>“ens33” 是具体接口的名字</p>
<p>“lo” 是环回接口</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=&quot;none&quot;</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class="line">NAME=ens33</span><br><span class="line">UUID=1103d7af-ad7c-4e36-9929-e61e8e137029</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=yes</span><br><span class="line"></span><br><span class="line">IPADDR=192.168.0.1</span><br><span class="line">PREFIX=24</span><br><span class="line">GATEWAY=192.168.0.1</span><br><span class="line">DNS1=114.114.114.114</span><br><span class="line">DNS2=192.168.0.1</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```NAME=&quot;ens33&quot;```		网络连接的名字</span><br><span class="line"></span><br><span class="line">```UUID=&quot;12b5a8c4-d319-4d70-ae1f-9d1fff3b2660&quot;```		网络连接的唯一标识，一个硬件会对应一个编号，这个编号自动生成，不需要修改</span><br><span class="line"></span><br><span class="line">```DEVICE=&quot;ens33&quot;```		设备名字</span><br><span class="line"></span><br><span class="line">```ONBOOT=&quot;yes&quot;```		yes表示开机的时候激活这个网络连接  no 禁用这个网络连接</span><br><span class="line"></span><br><span class="line">```IPADDR=192.168.0.203```		ip地址</span><br><span class="line"></span><br><span class="line">```PREFIX=24```		子网掩码的长度为24，相当于 255.255.255.0</span><br><span class="line"></span><br><span class="line">```NETMASK=255.255.255.0```		子网掩码为255.255.255.0</span><br><span class="line"></span><br><span class="line">```GATEWAY=192.168.0.1```		默认网关</span><br><span class="line"></span><br><span class="line">```DNS1=114.114.114.114```		首选dns服务器</span><br><span class="line"></span><br><span class="line">```DNS2=192.168.0.1```		备用dns服务器</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### 第三步，重新启动服务</span><br><span class="line"></span><br><span class="line">1. centos8里</span><br><span class="line"></span><br><span class="line">   ``` ifup ens33```</span><br><span class="line"></span><br><span class="line">2. centos7里</span><br><span class="line"></span><br><span class="line">   ```service  network  restart``` 		刷新网络服务</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">##### 附dns查看方式</span><br><span class="line"></span><br><span class="line">ifcfg-ens33		配置文件可以决定/etc/resolv.conf文件里的nameserver的ip地址</span><br><span class="line"></span><br><span class="line">resolv.conf		是真正工作的提供dns服务器地址的文件</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看dns服务器地址</span><br><span class="line"></span><br><span class="line">```cat  /etc/resolv.conf```</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line"></span><br><span class="line">Generated by NetworkManager</span><br><span class="line"></span><br><span class="line">nameserver 114.114.114.114</span><br><span class="line"></span><br><span class="line">nameserver 192.168.0.1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看默认网关</span><br><span class="line">```ip  route```</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">### 7.4 ping命令的使用</span><br><span class="line"></span><br><span class="line">```shell</span><br><span class="line">ping -c n  数量 </span><br><span class="line">ping -W [ -W timeout]  超时时间</span><br><span class="line">ping -w [ -w deadline]  期限  设置一个固定的时间为截止时间</span><br><span class="line">ping -s n 指定ping包数据的大小</span><br><span class="line"></span><br><span class="line">ping之死</span><br><span class="line">ping  www.baidu.com  -s 1000  看一个小时 是否丢包</span><br><span class="line">ping命令的作用：</span><br><span class="line">	1.测试网络的连通性</span><br><span class="line">	2.测试网络的质量：丢包率，响应时间长短</span><br></pre></td></tr></table></figure>



<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/07/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" data-id="ckqorwlb00001tcvq34wybxz7" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2021/07/04/hello-world/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Hello World</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/07/04/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/07/04/hello-world/">Hello World</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>